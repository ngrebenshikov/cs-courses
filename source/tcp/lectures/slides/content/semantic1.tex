Хакасский государственный университет им. Н.Ф. Катанова\newline
Теория вычислительных процессов\newline
\title{Лекция: Введение в семантическую теорию программ}
\date{}
\author{Николай Гребенщиков, www.grebenshikov.ru}
\maketitle

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Семантика = смысл}

	Описание конструкций языка программирования нужно для программиста и компилятора.

	Формальные способы описания семантики:

	\begin{itemize}
		\item Операционный
		\item Аксиоматический
		\item Денотационный
		\item Декларативный
	\end{itemize}
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Операционная семантика} определяется изменением состояния абстрактной машины.
	
	\textbf{Пример.} Машинная команда.
	
	\textbf{Для использования данного метода необходимо разработать:}
	\begin{itemize}
		\item вирутальную машину;
		\item транслятор языка программирования в машинный язык виртуальной машины.
	\end{itemize}
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Пример операционной семантики} 

	\includegraphics[width=1\textwidth]{content/semantic1/oper_sem_ex1.png}	
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Пример операционной семантики}. Функции.
	
	Множество равенств:\newline
	$\{f_1(x_1,\ldots,x_k)=E_1, \ldots, f_n(x_1,\ldots,x_k)=E_n\}$
	
	Каждое равество - это система подстановок $\left\langle s, E, t\right\rangle$. В выражении $E$ заменяется каждое вхождение символа $s$ выражением $t$.
	
	Соответственно, $\left\langle x_1,\ldots,x_k; f_i(t_1, \ldots, t_k) \rightarrow E_i; t_1, \ldots, t_k\right\rangle$
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Интерпретация операционной семантики функции}
	
	Пусть дано следующее множество равенств.
	
	$\{f(0) = 1, f(x) = x \cdot f(x-1)\}$
	
	Найдем $f(3)$.
	
	1. $\{f(0) = 1, f(3) = 3 \cdot f(2)\}$ \newline
	2. $\{f(0) = 1, f(3) = 3 \cdot f(2), f(2) = 1 \cdot f(1)\}$ \newline
	3. $\{f(0) = 1, f(3) = 3 \cdot f(2), f(2) = 2 \cdot f(1), f(1) = 1 \cdot f(0)\}$ \newline
	4. $\{f(0) = 1, f(3) = 3 \cdot f(2), f(2) = 2 \cdot f(1), f(1) = 1\}$ \newline
	5. $\{f(0) = 1, f(3) = 3 \cdot f(2), f(2) = 2, f(1) = 1\}$ \newline
	6. $\{f(0) = 1, f(3) = 6, f(2) = 2, f(1) = 1\}$ \newline
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Операционная семантика в жизни}
	
	Описание языка PL/I с испльзованием Vienna Definition Language (VDL), IBM.
	
	\textbf{Проблемы операционной семантики:}
	
	\begin{itemize}
		\item Эффективна для простых языков. VDL - очень сложен (на практике практически не используется).
		\item Является выражением конструкций одного языка с помощью другого. Вследствие чего зависит от алгоритмов. Концепции могут неявно выражаться через самих себя.
	\end{itemize}
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Аксиоматическая семантика} - распространение исчисления предикатов на программы.
	
	\textit{Семантика синтаксической конструкции} - набор аксиом и правил вывода результата.
	
	Каждый оператор программы сопровождается предшествующим и последующим логическими выражениями, устанавливающими ограничения на переменные в программе.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Введение в исчисление высказываний}
	
	Термин \textit{высказывание(утверждение)} используется для логических переменных, принимающих одно из двух значений $F$ и $Т$, которые представляют понятия «ложь» и «истина».
	
	На значениях типа «логический» определены пять операций: отрицание: $(\neg b)$, конъюнкция: $(b \wedge c)$, дизъюнкция: $(b \vee c)$, импликация: $(b \Rightarrow c)$, равенство: $(b = c)$.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Таблица истинности основных операций}

	\includegraphics[width=1\textwidth]{content/semantic1/truth_table.png}	
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Таблица истинности основных операций}

	\includegraphics[width=1\textwidth]{content/semantic1/truth_table.png}	
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
\textbf{Состояние} $s$ – это функция из множества идентификаторов в множество значений $F$ и $T$. 

\textbf{Тавтология} – высказывание, истинное в любом состоянии, в котором оно определено.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Кванторы}
	
	\begin{itemize}
		\item квантор существования - $(\exists x \in X)P(x)$
		\item квантор всеобщности - $(\forall x \in X)P(x)$
	\end{itemize}
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Триада Хоара} - $\{Q\} S \{R\}$
	
	где $Q, R$ - предикаты, $S$ - программа (оператор или последовательность операторов). 
	
	Обозначение определяет следующий смысл: «Если выполнение $S$ началось в состоянии, удовлетворяющем $Q$, то имеется гарантия, что оно завершится через конечное время в состоянии, удовлетворяющем $R$».
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Слабейшее предусловие} - $wp(S,R)$
	
	Условие, характеризующее множество всех начальных состояний, при которых запуск обязательно приведет к событию правильного завершения, причем система (машина, конструкция) останется в конечном состоянии, удовлетворяющем заданному постусловию, называется слабейшим предусловием, соответствующим этому постусловию.
	
	\textbf{Пример.} wp(sum := 2 * х + 1, sum > 1)=?
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Семантика оператора} определяется с помощью \textit{преобразователя предикатов}.
	
	\textit{Преобразователь предикатов} - правило, описывающее, как для любого заданного постусловия $R$ можно вывести соответствующее слабейшее предусловие $wp(S, R)$.
	
	Бывает проще найти высказываение $Q$, что $Q \Rightarrow wp(S,R)$
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Свойства слабейшего предусловия}
		
	\begin{enumerate}
		\item $wp(S, F) = F$ для любого $S$. (Закон исключенного чуда).
		\item Закон монотонности. Для любого $S$, предикатов $P$ и $R$ таких, что $P \Rightarrow R$ для всех состояний, справедливо для всех состояний $wp(S, P) \Rightarrow wp(S, R)$.
		\item Дистрибутивность дизъюнкции. Для любых $S, P, R$ справедливо $wp(S, P) \vee wp(S, R) = wp(S, P \vee R)$.
		\item Дистрибутивность конъюнкции. Для любых $S, P, R$ справедливо $wp(S, P) \wedge wp(S, R) = wp(S, P \wedge R)$.
	\end{enumerate}
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Доказательство правильности программы}
	
	От конца программы к началу.
	
	Слабейшее предусловие вычисляется только с помощью правила логического вывода, т.е. метода выведения истинности одного высказывания на основе значений остальных высказываний.
	
	При достижении начала программы первое ее предусловие отражает условия, при которых программа вычислит требуемые результаты.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Доказательство правильности программы}
	
	От конца программы к началу.
	
	Слабейшее предусловие вычисляется только с помощью правила логического вывода, т.е. метода выведения истинности одного высказывания на основе значений остальных высказываний.
	
	При достижении начала программы первое ее предусловие отражает условия, при которых программа вычислит требуемые результаты.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Аксиоматическое определение оператора присываивания}
	
	$x := E$, где $x$ - простая переменная, $E$ – выражение (типы $x$ и $E$ совпадают)
	
	$wp(x := E, R) = Q = R^x_E$, т.е. $Q$ получается из $R$ заменой каждого вхождения $x$ на $E$.

	Предполагается, что значение $Е$ определено и вычисление выражения $Е$ не может изменить значения ни одной переменной.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Аксиоматическое определение составного оператора}
	
	\textbf{begin} $S_1; S_2; \ldots ; S_n$ \textbf{end}

	Определим слабейшее предусловие для последовательности двух операторов:

	$wp(S_1;S_2, R) = wp(S_1, wp(S_2, R))$.

	Аналогично слабейшее предусловие определяется для последовательности из $n$ операторов.
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
	\textbf{Аксиоматическое определение оператора выбора}
	
	\textbf{if} $B_1 \rightarrow S_1\ ;\ B_2 \rightarrow S_2 \ ;\ \ldots\ ;\ B_n \rightarrow S_n$ \textbf{fi}
	
	$wp(if, R) = BB \wedge (B1 \Rightarrow wp(S_1, R)) \wedge \ldots \wedge (B_n \Rightarrow wp(S_n, R))$, где $BB = B_1 \vee B_2 \vee \ldots \vee B_n$.
	
	или
	
	$wp(if, R) = (\exists i: 1 \leq i \leq n : B_i) \wedge (\forall i: 1 \leq i \leq n : B_i \Rightarrow wp(S_i, R))$.
\end{slide}
% ----------------------------------------------------------------
\begin{slide}
\textbf{Продолжение следует.}
\end{slide}

% ----------------------------------------------------------------
\begin{slide}
\textbf{Список литературы}
\begin{itemize}
	\item Рабинович Е.В. Теория вычислительных процессов. \textbf{Раздел ``Описание смысла программ''}.
\end{itemize}
\end{slide}
